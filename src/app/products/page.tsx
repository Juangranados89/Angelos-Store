import {headers}from'next/headers';async function getP(){const h=headers();const host=h.get('x-forwarded-host')||h.get('host');const proto=h.get('x-forwarded-proto')||'https';const base=`${proto}://${host}`;const r=await fetch(`${base}/api/products`,{cache:'no-store'});return r.json()} export default async function Page(){const products=await getP();return (<div className='card'><h2>Productos</h2><table><thead><tr><th>SKU</th><th>Nombre</th><th>Categoría</th><th>Precio</th><th>Costo Prom.</th><th>IVA</th></tr></thead><tbody>{products.map((p:any)=>(<tr key={p.id}><td>{p.sku}</td><td>{p.name}</td><td>{p.category?.name||'—'}</td><td style={{textAlign:'right'}}>{Number(p.price).toFixed(2)}</td><td style={{textAlign:'right'}}>{Number(p.costAverage).toFixed(2)}</td><td style={{textAlign:'right'}}>{Number(p.ivaRate).toFixed(2)}</td></tr>))}</tbody></table></div>)}
